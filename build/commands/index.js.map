{"version":3,"sources":["../src/hooks/useGenerators.js","../src/components/Banner.js","../package.json","../src/components/Footer.js","../src/components/Tasks.js","../src/App.js","index.js"],"names":["cwd","process","fromMatches","matches","map","generator","name","path","basename","replace","useProjectGenerators","generators","setGenerators","checked","setChecked","useModuleGenerators","keyword","packages","dir","resolve","join","scanAllDirs","plugin","globby","sync","useGenerators","project","checkedProject","core","checkedCore","checkedPlugin","status","complete","Banner","module","exports","Footer","label","width","pkg","version","Tasks","toString","App","sprout","Bud","columns","rows","padding","appDimensions","height","buds","setBuds","selection","setSelection","bud","value"],"mappings":"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","file":"index.js","sourceRoot":"../../commands","sourcesContent":["import path from 'path'\nimport {useState, useEffect} from 'react'\nimport findPlugins from 'find-plugins'\nimport globby from 'globby'\n\nconst cwd = process.cwd()\n\n/**\n * Process globby matches into expected object\n */\nconst fromMatches = matches =>\n  matches.map(generator => ({\n    name: path.basename(generator).replace('.bud.js', ''),\n    path: generator,\n  }))\n\n/**\n * Generators sourced from project .bud dir\n */\nconst useProjectGenerators = () => {\n  const [generators, setGenerators] = useState([])\n  const [checked, setChecked] = useState(false)\n  useEffect(() => {\n    ;(async () => {\n      setChecked(false)\n\n      const matches = await globby([\n        `${cwd}/.bud/budfiles/**/*.bud.js`,\n      ])\n\n      setGenerators(fromMatches(matches))\n      setChecked(true)\n    })()\n  }, [])\n\n  return [generators, checked]\n}\n\n/**\n * Generators sourced from node_modules\n *\n * @param {string} keyword package.json keywords match\n */\nconst useModuleGenerators = keyword => {\n  const [generators, setGenerators] = useState([])\n  const [checked, setChecked] = useState(false)\n\n  useEffect(() => {\n    ;(async () => {\n      setChecked(false)\n\n      const packages = findPlugins({\n        dir: path.resolve(path.join(cwd, 'node_modules')),\n        scanAllDirs: true,\n        keyword,\n      }).map(\n        plugin => path.join(plugin.dir, '/**/*.bud.js'),\n      )\n\n      const matches = globby.sync(packages)\n\n      setGenerators(fromMatches(matches))\n      setChecked(true)\n    })()\n  }, [keyword])\n\n  return [generators, checked]\n}\n\n/**\n * useGenerators hook\n */\nconst useGenerators = () => {\n  const [project, checkedProject] = useProjectGenerators()\n  const [core, checkedCore] = useModuleGenerators('bud-core-generators')\n  const [plugin, checkedPlugin] = useModuleGenerators('bud-generator')\n\n  return {\n    project,\n    plugin,\n    core,\n    status: {\n      project: checkedProject,\n      plugin: checkedPlugin,\n      core: checkedCore,\n    },\n    complete: checkedCore && checkedProject && checkedPlugin,\n  }\n}\n\nexport default useGenerators\nexport {useProjectGenerators, useModuleGenerators}\n","import React from 'react'\nimport {Box} from 'ink'\nimport Gradient from 'ink-gradient'\nimport BigText from 'ink-big-text'\n\nconst Banner = () => (\n  <Box>\n    <Gradient name=\"teen\">\n      <BigText text=\"Bud\" font=\"simple3d\" />\n    </Gradient>\n  </Box>\n)\n\nexport default Banner\n","module.exports = {\n  \"name\": \"@roots/bud\",\n  \"version\": \"1.0.0-rc.5\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git://github.com/roots/bud.git\"\n  },\n  \"bin\": {\n    \"bud\": \"build/cli.js\"\n  },\n  \"engines\": {\n    \"node\": \">=12\"\n  },\n  \"scripts\": {\n    \"bud\": \"bud\",\n    \"build\": \"pastel build\",\n    \"dev\": \"pastel dev\",\n    \"docs\": \"bud generate readme\",\n    \"lint\": \"npm-run-all -c lint:*\",\n    \"lint:eslint\": \"eslint .\",\n    \"lint:prettier\": \"prettier --write .\"\n  },\n  \"files\": [\n    \"assets\",\n    \"build\",\n    \"src\"\n  ],\n  \"dependencies\": {\n    \"@roots/bud\": \"roots/bud#v1.0.0-rc.5\",\n    \"@roots/bud-generators\": \"roots/bud-generators#master\",\n    \"enquirer\": \"^2.3.5\",\n    \"esm\": \"^3.2.25\",\n    \"execa\": \"^4.0.2\",\n    \"find-plugins\": \"^1.1.7\",\n    \"fs-extra\": \"^9.0.1\",\n    \"globby\": \"^11.0.1\",\n    \"handlebars\": \"^4.7.6\",\n    \"handlebars-helpers\": \"^0.10.0\",\n    \"ink\": \"^2.7.1\",\n    \"ink-ascii\": \"^0.0.4\",\n    \"ink-big-text\": \"^1.1.0\",\n    \"ink-box\": \"^1.0.0\",\n    \"ink-divider\": \"^2.0.1\",\n    \"ink-gradient\": \"^1.0.0\",\n    \"ink-image\": \"^2.0.0\",\n    \"ink-link\": \"^1.1.0\",\n    \"ink-quicksearch-input\": \"^1.0.0\",\n    \"ink-spinner\": \"^3.0.1\",\n    \"ink-table\": \"^2.0.1\",\n    \"ink-text-input\": \"^3.2.2\",\n    \"ink-use-stdout-dimensions\": \"^1.0.5\",\n    \"pastel\": \"^1.0.3\",\n    \"prettier\": \"2.0.5\",\n    \"prop-types\": \"^15.7.2\",\n    \"react\": \"^16.13.1\",\n    \"rxjs\": \"^6.5.5\"\n  },\n  \"devDependencies\": {\n    \"babel-eslint\": \"^10.1.0\",\n    \"eslint\": \"^7.2.0\",\n    \"eslint-plugin-react\": \"^7.20.0\",\n    \"eslint-plugin-react-hooks\": \"^4.0.4\",\n    \"husky\": \"^4.2.5\",\n    \"markdownlint-cli\": \"^0.23.1\",\n    \"npm-run-all\": \"^4.1.5\"\n  },\n  \"licenses\": [\n    {\n      \"type\": \"MIT\",\n      \"url\": \"http://opensource.org/licenses/MIT\"\n    }\n  ]\n}\n;","import React from 'react'\nimport {Box, Color, Text} from 'ink'\n\nimport pkg from './../../package.json'\n\nconst Footer = ({label, width}) => (\n  <Box\n    width={width}\n    flexDirection=\"row\"\n    justifyContent=\"space-between\"\n    marginTop={1}\n    marginBottom={0}\n    paddingBottom={0}\n    paddingTop={0}>\n    <Box>{label ?? '    '}</Box>\n\n    <Box>\n      <Text bold>\n        <Color green>\n          ⚡️ {pkg.name} [{pkg.version}]\n        </Color>\n      </Text>\n    </Box>\n  </Box>\n)\n\nexport default Footer\n","import React from 'react'\nimport {Box, Color, Text} from 'ink'\nimport Spinner from 'ink-spinner'\n\n/**\n * Tasks\n *\n * @prop {object} status\n * @prop {object} sprout\n * @prop {bool}   complete\n */\nconst Tasks = ({status, complete}) => {\n  if (complete) {\n    return (\n      <Text>\n        <Color green>🏁{'  '}Done</Color>\n      </Text>\n    )\n  }\n\n  if (!status) {\n    return []\n  }\n\n  return !complete ? (\n    <Box>\n      {status && (\n        <Text>\n          <Color green>\n            <Spinner />\n          </Color>{' '}\n          {status.toString()}\n        </Text>\n      )}\n    </Box>\n  ) : (\n    []\n  )\n}\n\nexport default Tasks\n","import React from 'react'\nimport {Box} from 'ink'\nimport Tasks from './components/Tasks'\n\n/**\n * Bud application\n *\n * @prop {string} status\n * @prop {array}  sprout\n * @prop {bool} complete\n */\nconst App = ({status, sprout, complete}) => (\n  <Box\n    width=\"103\"\n    flexDirection=\"column\"\n    justifyContent=\"flex-start\"\n    paddingTop={1}\n    paddingBottom={1}>\n    <Tasks status={status} sprout={sprout} complete={complete} />\n  </Box>\n)\n\nexport default App\n","import React, {useEffect, useState} from 'react'\nimport {Box} from 'ink'\nimport QuickSearchInput from 'ink-quicksearch-input'\nimport useStdoutDimensions from 'ink-use-stdout-dimensions'\n\nimport useGenerators from './../src/hooks/useGenerators'\n\nimport Banner from './../src/components/Banner'\nimport Footer from './../src/components/Footer'\nimport App from './../src/App'\n\n/** Command: bud */\n/// Bud\nconst Bud = () => {\n  const [columns, rows] = useStdoutDimensions()\n  const padding = 4\n  const appDimensions = {\n    height: rows - padding,\n    width: columns - padding,\n  }\n\n  const {core, plugin, project, complete} = useGenerators()\n  const [buds, setBuds] = useState(null)\n  const [selection, setSelection] = useState(null)\n  useEffect(() => {\n    complete &&\n      setBuds(\n        [...project, ...plugin, ...core].map(bud => ({\n          value: bud.path,\n          label: bud.name,\n        })),\n      )\n  }, [complete])\n\n  return !selection ? (\n    <Box\n      paddingLeft={2}\n      paddingRight={2}\n      height={appDimensions.height}\n      flexDirection=\"column\"\n      justifyContent=\"space-around\">\n      <Banner />\n\n      {buds && !selection && (\n        <QuickSearchInput\n          label=\"Select a generator\"\n          items={buds}\n          onSelect={selection => setSelection(selection)}\n        />\n      )}\n\n      <Footer />\n    </Box>\n  ) : (\n    <App budfile={selection.value} />\n  )\n}\n\nexport default Bud\n"]}