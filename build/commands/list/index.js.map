{"version":3,"sources":["../src/hooks/useGenerators.js","../src/hooks/useSearch.js","../src/components/Banner.js","list/index.js"],"names":["cwd","process","useGenerators","search","project","setProject","checkedProject","setCheckedProject","files","map","result","name","path","basename","replace","plugin","setPlugin","checkedPlugin","setCheckedPlugin","keyword","match","dir","results","core","setCore","checkedCore","setCheckedCore","complete","useSearch","generatorName","budfile","setBudfile","length","Banner","label","List","buds","bud","id"],"mappings":"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","file":"index.js","sourceRoot":"../../commands","sourcesContent":["import path from 'path'\nimport {useState, useEffect} from 'react'\nimport findPlugins from 'find-plugins'\nimport globby from 'globby'\n\nconst cwd = process.cwd()\n\nconst useGenerators = (search = '*') => {\n  /**\n   * project .bud\n   */\n  const [project, setProject] = useState([])\n  const [checkedProject, setCheckedProject] = useState(false)\n  useEffect(() => {\n    (async () => {\n      setCheckedProject(false)\n\n      const files = await globby([\n        `${cwd}/.bud/budfiles/**/${search}.bud.js`,\n      ])\n\n      setProject(files.map(result => ({\n        name: path.basename(result).replace('.bud.js', ''),\n        path: result,\n      })))\n\n      setCheckedProject(true)\n    })()\n  }, [search])\n\n  /**\n   * node_modules\n   */\n  const [plugin, setPlugin] = useState([])\n  const [checkedPlugin, setCheckedPlugin] = useState(false)\n  useEffect(() => {\n    (async () => {\n      setCheckedPlugin(false)\n\n      const files = findPlugins({\n        keyword: 'bud-generators',\n      }).map(match => `${match.dir}/**/${search}.bud.js`)\n\n      const results = await globby(files)\n\n      setPlugin(results.map(result => ({\n        name: path.basename(result).replace('.bud.js', ''),\n        path: result,\n      })))\n\n      setCheckedPlugin(true)\n    })()\n  }, [search])\n\n  /**\n   * @roots/bud-generators\n   */\n  const [core, setCore] = useState([])\n  const [checkedCore, setCheckedCore] = useState(false)\n  useEffect(() => {\n    (async () => {\n      setCheckedCore(false)\n\n      const files = findPlugins({\n        keyword: 'bud-core-generators',\n      }).map(match => `${match.dir}/**/${search}.bud.js`)\n\n      const results = await globby(files)\n\n      setCore(results.map(result => ({\n        name: path.basename(result).replace('.bud.js', ''),\n        path: result,\n      })))\n\n      setCheckedCore(true)\n    })()\n  }, [search])\n\n  return {\n    project,\n    plugin,\n    core,\n    complete: {\n      project: checkedProject,\n      core: checkedCore,\n      plugin: checkedPlugin,\n    },\n  }\n}\n\nexport default useGenerators\n","import {useEffect, useState} from 'react'\nimport useGenerators from './useGenerators'\n\n/**\n * Use Search\n *\n * @param {string} generatorName\n */\nconst useSearch = (generatorName = '*') => {\n  const {core, plugin, project, complete} = useGenerators(generatorName)\n  const [budfile, setBudfile] = useState(null)\n\n  useEffect(() => {\n    if (project && project.length > 0) {\n      setBudfile(project[0])\n    } else if (plugin && plugin.length > 0) {\n      setBudfile(plugin[0])\n    } else if (core && core.length > 0) {\n      setBudfile(core[0])\n    }\n  }, [core, plugin, project, complete])\n\n  return {\n    core,\n    plugin,\n    project,\n    budfile,\n    complete: complete.core && complete.project && complete.plugin,\n  }\n}\n\nexport default useSearch\n","import React from 'react'\nimport {Box, Color, Text} from 'ink'\nimport Link from 'ink-link'\n\n/**\n * Banner component.\n *\n * @prop {string} label\n */\nconst Banner = ({label}) => (\n  <Box marginBottom={1} flexDirection=\"row\" justifyContent=\"space-between\">\n    {label && <Text>{label}</Text>}\n    <Box flexDirection=\"row\">\n      <Text>{`ðŸŒ±`}</Text>\n      <Text bold>\n        <Link url=\"https://roots.io/bud\">\n          <Color green>{'  Bud'}</Color>\n        </Link>\n      </Text>\n    </Box>\n  </Box>\n)\n\nexport default Banner\n","import React, {useState, useEffect} from 'react'\nimport {Box} from 'ink'\nimport Divider from 'ink-divider'\n\nimport useSearch from './../../src/hooks/useSearch'\nimport Banner from './../../src/components/Banner'\n\n/** Command: bud list */\n/// List available budfiles\nconst List = () => {\n  const {core, plugin, project, complete} = useSearch()\n  const buds = [...project, ...plugin, ...core]\n\n  return (\n    <Box width=\"103\" flexDirection=\"column\" justifyContent=\"flex-start\" padding={1}>\n      <Banner label={'List budfiles'} />\n      <Divider padding={0} width={100} />\n      {buds.map((bud, id) => (\n        <Box key={id} flexDirection=\"column\" flexGrow={1} justifyContent=\"flex-start\">\n          <Box>{bud.name}</Box>\n        </Box>\n      ))}\n    </Box>\n  )\n}\n\nexport default List\n"]}