{"version":3,"sources":["../src/components/Banner.js","../src/components/Loading.js","../src/components/App.js","../src/hooks/useConfig.js","../src/hooks/useData.js","../src/hooks/useGenerator.js","../src/bud/compiler/helpers/index.js","../src/bud/compiler/index.js","../src/bud/config/index.js","../src/bud/data/index.js","../src/bud/util/command.js","../src/bud/util/index.js","../src/bud/pipes/actions.js","../src/bud/pipes/index.js","../src/bud/actions/addDependencies.js","../src/bud/actions/command.js","../src/bud/actions/compile.js","../src/bud/actions/copy.js","../src/bud/actions/ensureDir.js","../src/bud/actions/ensureDirs.js","../src/bud/actions/git/clone.js","../src/bud/actions/git/index.js","../src/bud/actions/install.js","../src/bud/actions/json.js","../src/bud/actions/touch.js","../src/bud/actions/index.js","../src/bud/prettier/inferParser.js","../prettier.config.js","../src/bud/prettier/format.js","../src/bud/prettier/index.js","../src/bud/index.js","../src/hooks/useSubscription.js","../src/components/Tasks.js","../src/middleware/GeneratorMiddleware.js","../src/hooks/useGeneratorIndex.js","generate/index.js"],"names":["Banner","Loading","message","spinnerColor","propTypes","PropTypes","string","defaultProps","App","isLoading","loadingMessage","children","useConfig","cwd","configFile","config","require","useData","generator","data","setData","prompts","then","makeGenerator","generatorFile","makeGeneratorTemplateDir","useGenerator","templateDir","tasks","map","task","helpers","helper","fn","Array","prototype","slice","call","arguments","object","component","options","indexOf","inverse","components","hasInstance","forEach","makeCompiler","handlebars","registerHelpers","push","registerHelper","compiler","make","path","compile","makeConfig","projectDir","execa","makeData","key","value","project","command","cmd","makeUtil","actions","observer","props","pipe","Observable","subscribe","next","error","complete","pipes","addDependencies","util","cmdStr","repo","dev","pkgs","join","exitCode","stderr","msg","run","prettier","src","dest","template","parser","format","copy","ensureDir","console","log","fs","ensureDirs","dirs","clone","stdout","on","git","action","install","json","file","output","merge","err","touch","register","handle","callback","parsers","js","jsx","graphql","css","md","html","htm","ts","tsx","yml","yaml","less","inferParser","ext","split","length","module","exports","arrowParens","bracketSpacing","tabWidth","printWidth","singleQuote","jsxBracketSameLine","useTabs","trailingComma","semi","overrides","files","content","JSON","stringify","bud","registerActions","job","useSubscription","exit","subscription","setSubscription","status","setStatus","setComplete","unsubscribe","Tasks","toString","process","GeneratorMiddleware","fromMatches","matches","name","basename","replace","useProjectGenerators","generators","setGenerators","checked","setChecked","useModuleGenerators","keyword","packages","dir","resolve","scanAllDirs","plugin","useGeneratorIndex","checkedProject","core","checkedCore","checkedPlugin","Generate","inputArgs","setOutput","buds","setBuds","label","selection","setSelection","filter","displayQuickSearch","array"],"mappings":"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","file":"index.js","sourceRoot":"../../commands","sourcesContent":["import React from 'react'\nimport {Box, Text, Color} from 'ink'\nimport Link from 'ink-link'\n\nconst Banner = () => (\n  <Box flexDirection=\"column\" marginBottom={1}>\n    <Text>\n      <Link url=\"https://github.com/roots/bud\" fallback={false}>\n        <Color green>⚡️ @roots/bud</Color>\n      </Link>\n    </Text>\n  </Box>\n)\n\nexport default Banner\n","import React from 'react'\nimport {Box, Color} from 'ink'\nimport Spinner from 'ink-spinner'\nimport PropTypes from 'prop-types'\n\n/**\n * Loading\n *\n * @prop {string} message\n */\nconst Loading = ({message, spinnerColor = 'white'}) => (\n  <Box>\n    <Color keyword={spinnerColor}>\n      <Spinner />\n    </Color>{' '}\n    {message}\n  </Box>\n)\n\nLoading.propTypes = {\n  message: PropTypes.string,\n}\n\nLoading.defaultProps = {\n  message: 'Loading',\n}\n\nexport default Loading\n","import React from 'react'\nimport {Box} from 'ink'\n\nimport Banner from './Banner'\nimport Loading from './Loading'\n\n/**\n * Bud application.\n *\n * @prop {object} children\n */\nconst App = ({isLoading, loadingMessage, children}) => (\n  <Box\n    flexDirection=\"column\"\n    justifyContent=\"flex-start\"\n    paddingTop={1}\n    paddingRight={1}\n    paddingBottom={0}\n    paddingLeft={1}>\n    <Banner />\n\n    {isLoading && (\n      <Loading\n        spinnerColor=\"green\"\n        message={loadingMessage ?? 'Loading'}\n      />\n    )}\n    {children}\n  </Box>\n)\n\nexport default App\n","import {join} from 'path'\nimport {existsSync} from 'fs-extra'\n\n/**\n * Use config\n */\nconst useConfig = cwd => {\n  const configFile = join(cwd, '.bud/bud.config.json')\n  const config = existsSync(configFile) ? require(configFile) : null\n\n  return {config}\n}\n\nexport default useConfig\n","import {useEffect, useState} from 'react'\nimport {prompt} from 'enquirer'\n\n/**\n * Use prompts\n */\nconst useData = generator => {\n  const [data, setData] = useState(null)\n\n  useEffect(() => {\n    if (generator && !data) {\n      generator.prompts\n        ? prompt(generator.prompts).then(data => setData(data))\n        : setData({})\n    }\n  }, [generator])\n\n  return {data}\n}\n\nexport default useData\n","import {join, dirname} from 'path'\nimport {existsSync} from 'fs'\n\nconst makeGenerator = generatorFile =>\n  existsSync(generatorFile) ? require(generatorFile) : null\n\nconst makeGeneratorTemplateDir = generatorFile =>\n  join(dirname(generatorFile), 'templates')\n\n/**\n * Use Generator\n */\nconst useGenerator = generatorFile => {\n  const generator = {\n    ...makeGenerator(generatorFile),\n    templateDir: makeGeneratorTemplateDir(generatorFile),\n  }\n\n  // Attach the templateDir ref. to each generator task.\n  generator.tasks = generator.tasks.map(task => ({\n    ...task,\n    templateDir: generator.templateDir,\n  }))\n\n  return {generator}\n}\n\nexport default useGenerator\nexport {makeGenerator, makeGeneratorTemplateDir}\n","/**\n * Templating helpers\n */\nconst helpers = data => [\n  {\n    helper: 'array',\n    fn: function () {\n      return Array.prototype.slice.call(arguments, 0, -1)\n    },\n  },\n  {\n    helper: 'has',\n    fn: function (object, component, options) {\n      if (data[object].indexOf(component) > -1) {\n        return options.fn(this)\n      }\n\n      return options.inverse(this)\n    },\n  },\n  {\n    helper: 'hasAny',\n    fn: function (object, components, options) {\n      let hasInstance = false\n\n      if (components) {\n        components.forEach(component => {\n          if (data[object].indexOf(component) > -1) {\n            hasInstance = true\n          }\n        })\n      }\n\n      return hasInstance ? options.fn(this) : options.inverse(this)\n    },\n  },\n  {\n    helper: 'raw',\n    fn: function (options) {\n      return options.fn()\n    },\n  },\n]\n\nexport default helpers\n","import handlebars from 'handlebars'\nimport helpers from './helpers'\nimport handlebarsHelpers from 'handlebars-helpers'\n\n/**\n * Compiler.\n *\n * @param {handlebars} handlebars\n */\nconst makeCompiler = ({generator, data}) => {\n  handlebarsHelpers({handlebars})\n\n  generator.registerHelpers &&\n    generator.registerHelpers.forEach(helper => {\n      helpers.push(helper)\n    })\n\n  helpers(data).forEach(({helper, fn}) => {\n    handlebars.registerHelper(helper, fn)\n  })\n\n  return {\n    compiler: handlebars,\n\n    /**\n     * Make template.\n     *\n     * @param {string} path\n     */\n    make: function (path) {\n      return this.compiler.compile(path)\n    },\n  }\n}\n\nexport default makeCompiler\n","/**\n * Config\n *\n * @param {string} projectDir\n */\nconst makeConfig = ({projectDir, config}) => ({\n  projectDir,\n  ...config,\n  execa: {\n    cwd: projectDir,\n  },\n})\n\nexport default makeConfig\n","/**\n * Make data\n *\n * @type   {func}\n * @prop   {object} data\n * @return {object}\n */\nconst makeData = ({config, data, generator}) => {\n  const setData = ({key, value}) => {\n    data[key] = value\n  }\n\n  return {\n    ...(config ? config.project : []),\n    ...data,\n    ...(generator.data ? generator.data : []),\n    setData,\n  }\n}\n\nexport default makeData\n","import execa from 'execa'\n\n/**\n * Task runner\n *\n * @param  {object} config\n *\n * @return {func}\n */\nconst command = config => {\n  return cmd => execa.command(cmd, config.execa)\n}\n\nexport default command\n","import command from './command'\n\n/**\n * Make util\n *\n * @prop   {object} config\n * @return {object}\n */\nconst makeUtil = ({config}) => ({\n  command: command(config),\n})\n\nexport default makeUtil\n","import {Observable, from} from 'rxjs'\nimport {concatMap} from 'rxjs/operators'\n\n/**\n * Curried actions\n *\n * @prop {Observer} observer\n * @prop {object}   generator\n * @prop {object}   task\n * @prop {object}   actionProps\n */\nconst actions = ({observer, generator, actions, ...props}) => {\n  from(generator.tasks)\n    .pipe(\n      concatMap(\n        task =>\n          new Observable(async observer => {\n            actions[task.task]({task, actions, observer, ...props})\n          }),\n      ),\n    )\n    .subscribe({\n      next: next => observer.next(next),\n      error: error => observer.error(error),\n      complete: () => observer.complete(),\n    })\n}\n\nexport default actions\n","import actions from './actions'\n\n/**\n * Make Pipes\n *\n * @return {object}\n */\nconst pipes = [actions]\n\nexport default pipes\n","/**\n * Action: Add dependencies\n *\n * @param  {object}   task\n * @param  {Observer} observer\n * @param  {object}   util\n *\n * @return {void}\n */\nconst addDependencies = async ({task, observer, util}) => {\n  const cmdStr = () => {\n    switch (task.repo) {\n      case 'npm':\n        return `yarn add ${task.dev ? `-D` : ``} ${task.pkgs.join(\n          ' ',\n        )}`\n      case 'packagist':\n        return `composer require ${task.pkgs.join(' ')} ${\n          task.dev ? `--development` : ``\n        }`\n      default:\n        observer.error(`Incorrect package repo specified.`)\n    }\n  }\n\n  observer.next(`Installating packages from ${task.repo}`)\n  const {command, exitCode, stderr} = await util.command(cmdStr())\n  command && observer.next(command)\n  exitCode == 0 ? observer.complete() : observer.error(stderr)\n}\n\nexport default addDependencies\n","/**\n * Action: Arbitrary command\n *\n * @prop   {object}   task\n * @prop   {Observer} observer\n * @prop   {object}   util\n *\n * @return {Observable}\n */\nconst command = async ({task, observer, util}) => {\n  task.msg && observer.next(`${task.msg}`)\n\n  const {exitCode, stderr} = await util.command(task.run)\n  exitCode == 0 ? observer.complete() : observer.error(stderr)\n}\n\nexport default command\n","import {join} from 'path'\nimport {outputFile, readFile} from 'fs-extra'\n\n/**\n * Action: template\n *\n * @param  {object}   task\n * @param  {Observer} observer\n * @param  {object}   data\n * @param  {object}   config\n * @param  {object}   util\n * @param  {object}   prettier\n * @param  {object}   compiler\n * @return {void}\n */\nconst compile = async ({\n  task,\n  observer,\n  data,\n  prettier,\n  compiler,\n  config,\n}) => {\n  observer.next(`Write file: ${task.src}`)\n\n  const src = await readFile(join(task.templateDir, task.src), 'utf8')\n\n  const dest = compiler.make(task.dest)(data)\n  const template = compiler.make(src)(data)\n\n  observer.next(`Writing file ${dest}`)\n\n  await outputFile(\n    join(config.projectDir, dest),\n    task.parser ? prettier.format(template, task.parser) : template,\n  )\n\n  observer.complete()\n}\n\nexport default compile\n","import {join} from 'path'\nimport {copy as fsCopy} from 'fs-extra'\n\n/**\n * Action: copy\n *\n * @param  {object}   task\n * @param  {Observer} observer\n * @param  {object}   config\n *\n * @return {void}\n */\nconst copy = async ({task, config, observer}) => {\n  const src = join(task.templateDir, task.src)\n  const dest = join(config.projectDir, task.dest)\n\n  observer.next(`Copying file`)\n  await fsCopy(src, dest)\n\n  observer.complete()\n}\n\nexport default copy\n","import {join} from 'path'\nimport fs from 'fs-extra'\n\n/**\n * Make directory\n *\n * @param  {object}   task\n * @param  {Observer} observer\n * @param  {object}   config\n * @param  {object}   data\n * @param  {object}   compiler\n *\n * @return {void}\n */\nconst ensureDir = async ({\n  task,\n  observer,\n  config,\n  data,\n  compiler,\n}) => {\n  console.log(task, config, data)\n  const path = join(config.projectDir, compiler.make(task.path)(data))\n  console.log(path)\n  observer.next(`Writing directory ${path}`)\n  await fs.ensureDir(path)\n\n  observer.complete()\n}\n\nexport default ensureDir\n","import {Observable, from} from 'rxjs'\nimport {concatMap} from 'rxjs/operators'\n\n/**\n * Scaffold directories\n *\n * @prop   {task array} dirs\n * @return {Observable}\n */\nconst ensureDirs = ({\n  task,\n  observer,\n  actions,\n  config,\n  data,\n  compiler,\n}) => {\n  from(task.dirs)\n    .pipe(\n      concatMap(\n        path =>\n          new Observable(observer => {\n            actions.ensureDir({\n              task: {path},\n              config,\n              data,\n              compiler,\n              observer,\n            })\n          }),\n      ),\n    )\n    .subscribe({\n      next: next => observer.next(next),\n      error: error => observer.error(error),\n      complete: () => observer.complete(),\n    })\n}\n\nexport default ensureDirs\n","/**\n * Action: git clone\n *\n * @prop {object}   task\n * @prop {Observer} observer\n * @prop {object}   util\n */\nconst clone = async ({observer, task, util}) => {\n  observer.next(`Cloning ${task.repo} to ${task.dest}`)\n\n  const clone = util.command(\n    `git clone git@github.com:${task.repo} ${task.dest}`,\n  )\n\n  clone.stdout.on('data', () =>\n    observer.next(\n      observer.next(`Cloning ${task.repo} to ${task.dest}}`),\n    ),\n  )\n\n  clone.then(() => observer.complete())\n}\n\nexport default clone\n","import clone from './clone'\n\n/**\n * Action: Github\n *\n * @prop   {object}   task\n * @prop   {Observer} observer\n * @prop   {object}   util\n */\nconst git = async ({task, observer, ...props}) => {\n  if (task.action == 'clone') {\n    clone({task, observer, ...props})\n  }\n}\n\nexport default git\n","/**\n * Action: Install from package files\n *\n * @prop   {object}   task\n * @prop   {Observer} observer\n * @prop   {object}   util\n *\n * @return {Observable}\n */\nconst install = async ({task, observer, util}) => {\n  const cmdStr = () => {\n    switch (task.repo) {\n      case 'npm':\n        return 'yarn'\n      case 'packagist':\n        return 'composer install'\n      default:\n        observer.error(`Incorrect package repo specified.`)\n    }\n  }\n\n  observer.next(`Installating packages from ${task.repo}`)\n\n  const {command, exitCode, stderr} = await util.command(cmdStr())\n\n  command && observer.next(command)\n\n  exitCode == 0 ? observer.complete() : observer.error(stderr)\n}\n\nexport default install\n","import {outputFile} from 'fs-extra'\n\n/**\n * Action: Manipulate project JSON\n *\n * @prop {object}   task\n * @prop {Observer} observer\n * @prop {Prettier} prettier\n */\nconst json = async function ({task, observer, prettier, config}) {\n  const json = require(`${config.projectDir}/${task.file}`)\n  observer.next(`Writing JSON to ${task.file}`)\n\n  try {\n    const output = task.merge(json)\n    await outputFile(\n      `${config.projectDir}/${task.file}`,\n      prettier.format(output, 'json'),\n    )\n\n    observer.complete()\n  } catch (err) {\n    console.log(`There was a problem writing to ${task.file}`)\n  }\n}\n\nexport default json\n","import {ensureFile} from 'fs-extra'\nimport {join} from 'path'\n\n/**\n * Action: Touch\n *\n * @prop   {object}   task\n * @prop   {object}   config\n * @prop   {object}   compiler\n * @prop   {object}   data\n * @prop   {Observer} observer\n */\nconst touch = async ({task, config, compiler, data, observer}) => {\n  const path = join(config.projectDir, compiler.make(task.path)(data))\n\n  try {\n    await ensureFile(path).then(() => {\n      observer.next()\n    })\n\n    observer.complete()\n  } catch (error) {\n    observer.error()\n  }\n}\n\nexport default touch\n","import addDependencies from './addDependencies'\nimport command from './command'\nimport compile from './compile'\nimport copy from './copy'\nimport ensureDir from './ensureDir'\nimport ensureDirs from './ensureDirs'\nimport git from './git'\nimport install from './install'\nimport json from './json'\nimport touch from './touch'\n\n/**\n * Actions\n *\n * @type {object}\n */\nconst actions = {\n  addDependencies,\n  command,\n  compile,\n  copy,\n  ensureDir,\n  ensureDirs,\n  git,\n  install,\n  json,\n  touch,\n  register: function ({action}) {\n    this[`${action.handle}`] = action.callback\n  },\n}\n\nexport default actions\n","/**\n * Prettier parsers.\n * @type {object}\n */\nconst parsers = {\n  js: 'babel',\n  jsx: 'babel',\n  graphql: 'graphql',\n  css: 'css',\n  json: 'json',\n  md: 'markdown',\n  html: 'html',\n  htm: 'html',\n  ts: 'typescript',\n  tsx: 'typescript',\n  yml: 'yaml',\n  yaml: 'yaml',\n  less: 'less',\n}\n\n/**\n * Infer parser.\n *\n * @type  {async func}\n * @param {string} file\n */\nconst inferParser = async function (file) {\n  const ext = file.split('.')[file.split('.').length - 1]\n\n  return parsers[`${ext}`] ?? null\n}\n\nexport default inferParser\n","module.exports = {\n  arrowParens: 'avoid',\n  bracketSpacing: false,\n  tabWidth: 2,\n  printWidth: 70,\n  singleQuote: true,\n  jsxBracketSameLine: true,\n  useTabs: false,\n  trailingComma: 'all',\n  semi: false,\n  overrides: [\n    {\n      files: ['*.md'],\n      options: {\n        parser: 'markdown',\n      },\n    },\n    {\n      files: ['*.json'],\n      options: {\n        parser: 'json',\n      },\n    },\n  ],\n}\n","import prettier from 'prettier'\nconst config = require('../../../prettier.config.js')\n\n/**\n * Format\n *\n * @type   {func}\n * @param  {object|string} content\n * @param  {parser} string\n * @return {string}\n */\nconst format = (content, parser) => {\n  content =\n    typeof content !== 'string' ? JSON.stringify(content) : content\n\n  return prettier.format(content, {\n    ...config,\n    parser: parser || 'babel',\n  })\n}\n\nexport default format\n","import inferParser from './inferParser'\nimport format from './format'\n\n/**\n * Prettier\n */\nconst prettier = {\n  format,\n  inferParser,\n}\n\nexport default prettier\n","import {Observable, from} from 'rxjs'\nimport {concatMap} from 'rxjs/operators'\nimport makeCompiler from './compiler'\nimport makeConfig from './config'\nimport makeData from './data'\nimport makeUtil from './util'\nimport pipes from './pipes'\nimport actions from './actions'\nimport prettier from './prettier'\n\n/**\n * Bud\n *\n * @prop {string} projectDir\n * @prop {object} config\n * @prop {object} data\n * @prop {object} generator\n * @prop {string} templateDir\n * @prop {bool}   logging\n *\n * @return {Observable}\n */\nconst bud = props => {\n  const {generator} = props\n  const config = makeConfig({...props})\n  const data = makeData({...props})\n  const util = makeUtil({config})\n  const compiler = makeCompiler({generator, data})\n\n  generator.registerActions &&\n    generator.registerActions.forEach(action => {\n      actions.register({action})\n    })\n\n  return new Observable(observer => {\n    const props = {\n      config,\n      data,\n      actions,\n      compiler,\n      prettier,\n      util,\n      generator,\n    }\n\n    from(pipes)\n      .pipe(\n        concatMap(\n          job =>\n            new Observable(async observer => {\n              await job({observer, ...props})\n            }),\n        ),\n      )\n\n      .subscribe({\n        next: next => {\n          observer.next(next)\n        },\n        error: error => {\n          observer.error(error)\n        },\n        complete: () => {\n          observer.complete()\n        },\n      })\n  })\n}\n\nexport default bud\n","import {useEffect, useState} from 'react'\nimport {useApp} from 'ink'\nimport bud from './../bud'\n\n/**\n * Use subscription.\n */\nconst useSubscription = ({config, data, projectDir, generator}) => {\n  const {exit} = useApp()\n\n  const [subscription, setSubscription] = useState(false)\n  const [status, setStatus] = useState(null)\n  const [error] = useState(null)\n  const [complete, setComplete] = useState(false)\n\n  useEffect(() => {\n    if (generator && data && !subscription) {\n      setSubscription(\n        bud({config, data, generator, projectDir}).subscribe({\n          next: next => setStatus(next),\n          complete: () => setComplete(true),\n        }),\n      )\n    }\n  }, [data])\n\n  useEffect(() => {\n    complete &&\n      (() => {\n        subscription.unsubscribe()\n        exit()\n      })()\n  }, [complete])\n\n  return {status, error, complete}\n}\n\nexport default useSubscription\n","import React from 'react'\nimport {Box, Color, Text} from 'ink'\nimport Spinner from 'ink-spinner'\n\n/**\n * Tasks\n *\n * @prop {object} status\n * @prop {object} sprout\n * @prop {bool}   complete\n */\nconst Tasks = ({status, complete}) => {\n  if (complete) {\n    return (\n      <Text>\n        <Color green>🏁{'  '}Done</Color>\n      </Text>\n    )\n  }\n\n  if (!status || complete) {\n    return []\n  }\n\n  return (\n    <Box>\n      {status && (\n        <Text>\n          <Color green>\n            <Spinner />\n          </Color>{' '}\n          {status.toString()}\n        </Text>\n      )}\n    </Box>\n  )\n}\n\nexport default Tasks\n","import React from 'react'\n\nimport useConfig from './../hooks/useConfig'\nimport useData from './../hooks/useData'\nimport useGenerator from './../hooks/useGenerator'\nimport useSubscription from './../hooks/useSubscription'\n\nimport Tasks from './../components/Tasks'\n\nconst cwd = process.cwd()\n\n/**\n * Middleware: Generator\n *\n * @prop {string} generatorFile\n * @prop {string} output\n */\nconst GeneratorMiddleware = ({generatorFile, output}) => {\n  const {config} = useConfig(cwd)\n  const {generator} = useGenerator(generatorFile)\n  const {data} = useData(generator)\n  const {status, complete} = useSubscription({\n    config,\n    data,\n    generator,\n    projectDir: output,\n  })\n\n  return <Tasks status={status} complete={complete} />\n}\n\nexport default GeneratorMiddleware\n","import path from 'path'\nimport {useState, useEffect} from 'react'\nimport findPlugins from 'find-plugins'\nimport globby from 'globby'\n\nconst cwd = process.cwd()\n\n/**\n * Process globby matches into expected object\n */\nconst fromMatches = matches =>\n  matches.map(generator => ({\n    name: path.basename(generator).replace('.bud.js', ''),\n    path: generator,\n  }))\n\n/**\n * Generators sourced from project .bud dir\n */\nconst useProjectGenerators = () => {\n  const [generators, setGenerators] = useState([])\n  const [checked, setChecked] = useState(false)\n  useEffect(() => {\n    ;(async () => {\n      setChecked(false)\n\n      const matches = await globby([\n        `${cwd}/.bud/generators/**/*.bud.js`,\n      ])\n\n      setGenerators(fromMatches(matches))\n      setChecked(true)\n    })()\n  }, [])\n\n  return [generators, checked]\n}\n\n/**\n * Generators sourced from node_modules\n *\n * @param {string} keyword package.json keywords match\n */\nconst useModuleGenerators = keyword => {\n  const [generators, setGenerators] = useState([])\n  const [checked, setChecked] = useState(false)\n\n  useEffect(() => {\n    ;(async () => {\n      setChecked(false)\n\n      const packages = findPlugins({\n        dir: path.resolve(path.join(cwd, 'node_modules')),\n        scanAllDirs: true,\n        keyword,\n      }).map(plugin =>\n        path.join(plugin.dir, '/generators/**/*.bud.js'),\n      )\n\n      const matches = await globby([\n        ...packages,\n        '!/**/*.preset.bud.js',\n      ])\n\n      setGenerators(fromMatches(matches))\n      setChecked(true)\n    })()\n  }, [keyword])\n\n  return [generators, checked]\n}\n\n/**\n * useGenerators hook\n */\nconst useGeneratorIndex = () => {\n  const [project, checkedProject] = useProjectGenerators()\n  const [core, checkedCore] = useModuleGenerators(\n    'bud-core-generators',\n  )\n  const [plugin, checkedPlugin] = useModuleGenerators('bud-generator')\n\n  return {\n    project,\n    plugin,\n    core,\n    status: {\n      project: checkedProject,\n      plugin: checkedPlugin,\n      core: checkedCore,\n    },\n    complete: checkedCore && checkedProject && checkedPlugin,\n  }\n}\n\nexport default useGeneratorIndex\nexport {useProjectGenerators, useModuleGenerators}\n","import React, {useEffect, useState} from 'react'\nimport PropTypes from 'prop-types'\nimport path from 'path'\nimport {isEqual} from 'lodash'\nimport QuickSearchInput from 'ink-quicksearch-input'\n\nimport App from './../../src/components/App'\nimport GeneratorMiddleware from './../../src/middleware/GeneratorMiddleware'\nimport useGeneratorIndex from './../../src/hooks/useGeneratorIndex'\n\nconst cwd = process.cwd()\n\n/** Command: bud generate */\n/// Run a generator.\nconst Generate = ({inputArgs}) => {\n  const [name] = useState(inputArgs?.[1] ?? null)\n  const [output, setOutput] = useState(cwd)\n  useEffect(() => {\n    inputArgs?.[2] &&\n      (() => {\n        setOutput(path.resolve(cwd, inputArgs[2]))\n      })()\n  }, [inputArgs])\n\n  const {core, plugin, project, complete} = useGeneratorIndex()\n\n  const [buds, setBuds] = useState(null)\n  useEffect(() => {\n    complete &&\n      setBuds(\n        [...project, ...plugin, ...core].map(bud => ({\n          value: bud.path,\n          label: bud.name,\n        })),\n      )\n  }, [name, complete])\n\n  const [selection, setSelection] = useState(null)\n  useEffect(() => {\n    name &&\n      buds &&\n      complete &&\n      setSelection(buds.filter(bud => isEqual(bud.label, name))[0])\n  }, [complete, buds, name])\n\n  const isLoading = !name && !buds && !selection\n  const displayQuickSearch = !name && buds && !selection\n\n  return (\n    <App isLoading={isLoading}>\n      {displayQuickSearch && (\n        <QuickSearchInput\n          label=\"Select a generator\"\n          items={buds}\n          onSelect={selection => setSelection(selection)}\n        />\n      )}\n\n      {selection && (\n        <GeneratorMiddleware\n          output={output}\n          generatorFile={selection.value}\n        />\n      )}\n    </App>\n  )\n}\n\nGenerate.propTypes = {\n  inputArgs: PropTypes.array,\n}\n\nexport default Generate\n"]}