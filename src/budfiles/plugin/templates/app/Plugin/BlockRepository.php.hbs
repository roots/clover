<?php

namespace {{pascalcase namespace}}\Plugin;

use Psr\Container\ContainerInterface;
use Illuminate\Support\Collection;
use {{pascalcase namespace}}\Plugin\Block;
use {{pascalcase namespace}}\Plugin\BlockRepositoryInterface;

/**
 * Block repository implementation class.
 */
class BlockRepository implements BlockRepositoryInterface
{
    /** @var Collection */
    private $blocks;

    /**
     * Construct.
     */
    public function __construct(ContainerInterface $bud)
    {
        $this->blocks = $bud->get('collection')::make([]);
    }

    /**
     * Get block.
     *
     * @param  string
     * @return Block
     */
    public function get(string $handle): Block
    {
        return $this->blocks->get($handle);
    }

    /**
     * Get blocks.
     *
     * @return Collection
     */
    public function all(): Collection
    {
        return $this->blocks;
    }

    /**
     * Add block.
     *
     * @param  Block
     * @return void
     */
    public function add(Block $block): void
    {
        $this->blocks->put($block->getHandle(), $block);
    }

    /**
     * Remove block.
     *
     * @param  string
     * @return void
     */
    public function remove(string $handle): void
    {
        $this->blocks->forget($handle);
    }
}